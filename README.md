# Logistic回归预测模型

基于Logistic回归方程的预测模型交互界面，支持问卷和简要两种信息输入途径。

## 功能特点

- 📝 **问卷模式**：通过详细的问卷收集信息
- 📋 **简要模式**：快速输入关键信息
- 📊 **实时计算**：自动计算Logit值和p值
- 🎯 **智能诊断**：基于p值阈值（默认0.905）输出诊断结果

## 安装依赖

```bash
pip install -r requirements.txt
```

## 运行应用

```bash
streamlit run app.py
```

应用将在浏览器中自动打开，默认地址为 `http://localhost:8501`

## 使用方法

1. **选择输入模式**：在侧边栏选择"问卷"或"简要"模式
2. **填写信息**：根据选择的模式填写相应信息
3. **调整阈值**：可在侧边栏调整诊断阈值（默认0.905）
4. **计算结果**：点击"计算预测结果"按钮
5. **查看结果**：查看Logit值、p值和诊断结果

## 诊断规则

- 当 p值 ≥ 阈值（默认0.905）时，输出"诊断"
- 当 p值 < 阈值时，输出"不诊断"

## 项目结构

```
logistic_prediction/
├── app.py              # Streamlit主程序
├── model.py            # Logistic回归模型核心逻辑
├── requirements.txt    # Python依赖包
└── README.md          # 项目说明文档
```

## 模型变量

模型包含以下9个特征变量（按顺序）：

1. **猝倒** (有=1, 无=0) - 系数: 3.718
2. **打鼾** (有=1, 无=0) - 系数: -1.986
3. **性格变化** (有=1, 无=0) - 系数: 1.343
4. **幻觉** (有=1, 无=0) - 系数: 0.889
5. **遗尿** (有=1, 无=0) - 系数: -0.790
6. **性别** (女=1, 男=0) - 系数: -0.767
7. **嗜睡家族史** (有=1, 无=0) - 系数: 0.513
8. **睡瘫** (有=1, 无=0) - 系数: 0.509
9. **年龄** (岁，连续变量) - 系数: -0.051

**截距**: -0.930

**猝倒定义**：当以下3个问题中有≥2项回答“是”，则判定为“有猝倒”：
- 情绪激动时，腿部无力或膝盖弯曲欲跌倒
- 情绪激动时，下巴松垂或下垂
- 情绪激动时，头或肩突然无力往下掉

## 模型公式

Logit = -0.930 + 3.718×猝倒 - 1.986×打鼾 + 1.343×性格变化 + 0.889×幻觉 
        - 0.790×遗尿 - 0.767×性别 + 0.513×嗜睡家族史 + 0.509×睡瘫 - 0.051×年龄

p值 = 1 / (1 + exp(-Logit))

## 注意事项

- 模型已使用真实训练数据得到的系数
- 所有二分类变量：0表示"无"或"男"，1表示"有"或"女"
- 年龄为连续变量，单位为岁
- 诊断阈值默认设置为0.905，可在界面中调整
